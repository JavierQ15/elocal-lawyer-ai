BOE_BASE_URL=https://www.boe.es/datosabiertos/api/legislacion-consolidada
BOE_INDICE_TEMPLATE={base}/id/{id_norma}/texto/indice
BOE_BLOQUE_TEMPLATE={base}/id/{id_norma}/texto/bloque/{id_bloque}

# Canonical app URL for Mongo in compose.
MONGO_URL=mongodb://mongodb:27017/boe

# Backward-compatible vars used by current core config loader.
MONGO_URI=mongodb://mongodb:27017
MONGO_DB=boe

REDIS_URL=redis://redis:6379
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

STORAGE_ROOT=./data/boe
REQUEST_CONCURRENCY=4
HTTP_TIMEOUT_MS=30000
USER_AGENT=BOE-RAG-Client/1.0
RETRY_COUNT=5
RETRY_BACKOFF_MS=500
STORE_RAW_SNAPSHOTS=false
STORE_XML_IN_MONGO=false
STORE_PRETTY_XML_IN_MONGO=false
CHUNK_SIZE=800
CHUNK_OVERLAP=120
CHUNK_METHOD=recursive
TEXT_EXTRACTOR=fastxml
NORMALIZE_TERRITORY=true

QDRANT_URL=http://qdrant:6333
QDRANT_API_KEY=
QDRANT_COLLECTION=boe_chunks
QDRANT_SEARCH_TIMEOUT_SEC=3
QDRANT_HTTP_TIMEOUT_SEC=10

EMBEDDINGS_PROVIDER=local
EMBEDDINGS_FALLBACK_PROVIDER=none
EMBEDDINGS_MODEL=qwen3-embedding:8b
EMBEDDINGS_TIMEOUT_MS=60000
LOCAL_EMBEDDINGS_URL=http://host.docker.internal:11434/api/embeddings
OPENAI_API_KEY=
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_EMBEDDINGS_MODEL=text-embedding-3-large

HOST=0.0.0.0
PORT=3000
RATE_LIMIT_MAX=120
RATE_LIMIT_WINDOW=1 minute
REQUEST_TIMEOUT_MS=30000
CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173
VITE_RAG_API_URL=http://localhost:3000
RAG_LLM_BASE_URL=http://host.docker.internal:11434
RAG_LLM_MODEL=qwen2.5:7b-instruct
RAG_LLM_TIMEOUT_MS=90000
RAG_LLM_TEMPERATURE=0.1
RAG_ANSWER_TOP_UNIDADES=5
RAG_ANSWER_MAX_UNIDAD_CHARS=6000

INDEXER_BATCH_SIZE=32
INDEXER_EMBED_CONCURRENCY=4

PIPELINE_CONCURRENCY_ORCHESTRATOR=1
PIPELINE_CONCURRENCY_SYNC=4
PIPELINE_CONCURRENCY_BUILD=4
PIPELINE_CONCURRENCY_INDEX=2
PIPELINE_SEED_BATCH_SIZE=200

PIPELINE_SYNC_RATE_LIMIT_MAX=8
PIPELINE_SYNC_RATE_LIMIT_DURATION_MS=1000
PIPELINE_BUILD_RATE_LIMIT_MAX=0
PIPELINE_BUILD_RATE_LIMIT_DURATION_MS=1000
PIPELINE_INDEX_RATE_LIMIT_MAX=0
PIPELINE_INDEX_RATE_LIMIT_DURATION_MS=1000

BULL_BOARD_HOST=0.0.0.0
BULL_BOARD_PORT=3100
